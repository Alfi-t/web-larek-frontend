# Проектная работа "Веб-ларек"

## Описание проекта 

Web-ларек - Интернет-магазин для веб-разработчиков. В нем можно:

- Просмотривать каталог товаров
- Добавлять товары в корзину и оформлять  заказ
- Выбирать способ оплаты и вводить данные для доставки

## Используемый стек:
HTML, SCSS, TS, Webpack

## Структура проекта:
- src/ — исходные файлы проекта
- src/components/ — папка с JS компонентами
- src/components/base/ — папка с базовым кодом

## Важные файлы:
- src/pages/index.html — HTML-файл главной страницы
- src/types/index.ts — файл с типами
- src/index.ts — точка входа приложения
- src/scss/styles.scss — корневой файл стилей
- src/utils/constants.ts — файл с константами
- src/utils/utils.ts — файл с утилитами

## Установка и запуск
Для установки и запуска проекта необходимо выполнить команды

```
npm install
npm run start
```

или

```
yarn
yarn start
```
## Сборка

```
npm run build
```

или

```
yarn build
```

## Архитектура проекта
Архитектура проекта построена по паттерну **MVP (Model-View-Presenter)** , что обеспечивает четкое разделение ответственности между 
классами Model и View , где каждый класс выполняет свою роль:

Model - работа с загрузкой данных по API, сохранение и работа с данными полученными от пользователя.

View - отображает интерфейс для взаимодействия с пользователем, отлавливает и сообщает о произошедших событиях.

EventEmitter выступает в роли Представителя (Presenter) - связывает модели данных с отображением интерфейсов при сработке какого нибудь события, управляя взаимодействием между ними.

### Базовые классы

### Класс Api
Предназначен для взаимодействия с сервером посредством HTTP-запросов.

**Методы:**
- handleResponse(response: Response): Promise<object> - обработчик ответа сервера.
- get(uri: string) - принимает изменяющеюся часть url-адреса, возвращает ответ от сервера.
- post(uri: string, data: object, method: ApiPostMethods = 'POST') - принимает изменяющеюся часть url-адреса, принимает данные в виде объекта для отправки на сервер, type ApiPostMethods = 'POST' | 'PUT' | 'DELETE'.

### Класс EventEmitter

Отвечает за обмен событиями между компонентами.

**Методы:**
- on - Устанавливает обработчик на событие.
- off - Удаляет обработчик события.
- emit - Инициирует событие с данными.
- onAll - для подписки на все события.
- offAll - для сброса всех подписчиков.
- trigger - генерирует конкретное событие с конкретными аргументами.

### Классы Model

#### Класс ApiModel
Наследуется от класса Api, отвечает за передачу и получение данных от сервера.

**Методы:**

- getListProductCard — получает массив объектов (карточек) с сервера.
- postOrderLot — получает ответ от сервера по сделанному/отправленному заказу.

#### Класс BasketModel
Хранит и работает с данными, полученными от пользователя.

**Методы:**

- getCounter — возвращает количество товаров в корзине.
- getSumAllProducts — считает и возвращает сумму всех товаров в корзине.
- setSelectedCard — добавляет товар в корзину.
- deleteCardToBasket — удаляет товар из корзины.
- clearBasketProducts — очищает/удаляет все товары из корзины.

#### Класс DataModel
Принимает и хранит данные продуктов, полученные с сервера.

**Метод:**

- setPreview — получает данные карточки, которую открыл пользователь.

#### Класс FormModel
Хранит данные, полученные от пользователя.

**Методы:**

- setOrderAddress — принимает/сохраняет адрес пользователя.
- validateOrder — проверяет адрес пользователя и способ оплаты.
- setOrderData — принимает/сохраняет номер телефона/почту пользователя.
- validateContacts — проверяет номер телефона/почту пользователя.
- getOrderLot — возвращает объект данных пользователя с выбранными товарами.

### Классы View
Позволяют отображать элементы страницы с полученными данными и взаимодействовать с пользователем.

#### Класс Basket
Управляет отображением корзины. Используется для отображения списка товаров в ней и общей стоимости.

**Методы:**

- headerBasketCounter — сохраняет и устанавливает количество товаров в корзине.
- sumAllProducts — сохраняет и устанавливает сумму всех товаров в корзине.

#### Класс BasketItem
Управляет отображением элементов (продуктов) в корзине.

**Метод:**

- setPrice — принимает цену продукта в числовом значении и возвращает строку.

### Класс Card
Управляет отображением карточки товара на веб-странице.

**Методы:**

- setText — принимает два значения: первое — HTMLElement, второе — текстовое содержимое для HTMLElement.
- cardCategory — принимает строковое значение и создаёт новый className для HTMLElement.
- setPrice — принимает цену продукта в числовом значении и возвращает строку.

#### Класс CardPreview
Наследуется от класса Card, управляет отображением подробного описания карточки товара в превью и позволяет добавить карточку в корзину.

**Метод:**

- notSale — проверяет наличие цены продукта, при отсутствии цены ограничивает покупку.

### Класс Order
Управляет отображением содержимого модального окна и позволяет принять от пользователя метод оплаты и адрес.

**Метод:**

- paymentSelection — устанавливает обводку вокруг выбранного метода оплаты.

### Класс Contacts
Управляет отображением содержимого модального окна и позволяет принять от пользователя номер телефона и Email.

#### Класс Modal
Управляет отображением модальных окон.

**Методы:**

- open — отображает модальное окно.
- close — закрывает модальное окно.

#### Класс Success
Используется для отобажения модального окна с сообщением о том, что операция прошла успешно.